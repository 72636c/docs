# Single Sign-On with Okta

Okta can be used as an SSO provider for your Buildkite organization. To complete this tutorial, you will need admin privileges for both Okta and Buildkite.

## Step 1. Add the Buildkite App to your Okta Account

Log into your Okta account, and follow these steps:

1. Click the Admin button in Okta to access your Admin dashboard
1. In the Shortcuts menu, click 'Add Applications' to search the Okta application directory
1. Search for 'Buildkite'
1. Click 'Add' to add the Buildkite app to your Okta account
1. Give your application a name in the 'General Settings' form
1. In the Buildkite application in Okta, select the tab labelled 'Sign On'
1. In the Sign On section 'Settings', click the 'Identity Provider Metadata' link and copy the URL for use in the next step
1. In the Credential Details section, select Email for the Application username format
1. Select the tab labelled 'Applications'
1. Assign your user account or group to the application so that you will be able to complete a test login

## Step 2. Create an SSO Provider

In your Buildkite Organization Settings' Single Sign On menu item, choose the Okta provider:

<%= image "sso-settings.png", width: 1716/2, height: 884/2, alt: "Screenshot of the Buildkite SSO Settings Page" %>

On the following screen in the Metadata URL field, enter the 'Identity Provider Metadata' link that you copied in the previous step.

<%= image "okta-settings.png", width: 1742/2, height: 606/2, alt: "Screenshot of the Buildkite Okta Settings Page" %>

<div class="Docs__note">
  <p>You can also set up SSO providers manually with GraphQL. See the <a href="/docs/integrations/sso/sso-setup-with-graphql">SSO Setup with GraphQL Guide</a> for detailed instructions and code samples.</p>
</div>

### SCIM Deprovisioning

Using the provisioning settings in Okta you can enable automatic deprovisioning of users in your Buildkite organization. In Okta this feature is called 'Deactivating' a user, and it is the only SCIM operation Buildkite currently supports.

After creating your SSO Provider in Buildkite, an access token and SCIM URL will be generated. 

The token and URL are found in your Okta SSO Provider Settings:

<%= image "okta-scim-settings.png", width: 1440/2, height: 548/2, alt: "Screenshot of the Buildkite Okta Settings SCIM Deprovisioning section" %>

Copy both the token and URL, then return to your Buildkite application in Okta. 

Set up deprovisioning in Okta: 

1. On the 'Provisioning' tab in the Okta Buildkite application, select 'To App' from the left side menu
1. Edit the 'Provisioning to App' settings, and enable 'Create Users' and 'Deactivate Users'
1. Select 'Integrations' from the left side menu
1. Enter the token and URL that you copied from your Buildkite SSO Provider
1. Save and test your settings

Return to Buildkite and your SSO Provider Settings before continuing to the next step.

<div class="Docs__note">
  <p>This integration with Okta is currently under development and is not available to customers yet.</p>
</div>

## Step 3. Perform a Test Login

Follow the instructions to perform a test login. Performing a test login will verify that SSO is working correctly before you activate it for your organization members.

## Step 4. Enable the new SSO Provider

Once you've performed a test login you can enable your provider. Activating SSO will not force a log out of existing users, but will cause all new or expired sessions to authorize through Okta before organization data can be accessed.

If you need to edit or update your Okta provider settings at any time, you will need to disable the provider first. For more information on disabling a provider, see the [disabling SSO](/docs/integrations/sso#disabling-and-removing-sso) section of the SSO overview.
