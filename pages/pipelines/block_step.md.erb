# Block Step

A *block* step is used to pause the execution of a build and wait on a team member to unblock it (via the web or the API). With the addition of a custom prompt, you can also use it to collect data from your team for use later in the pipeline.

<%= toc %>

The most basic type of block step can be added to your `pipeline.yml` as follows:

```yml
- command: "command.sh"
- block
- command: "deploy.sh"
```

Changing the label of the step in the pipeline can be done by setting it as the value of the *block* step:

```yml
- command: "command.sh"
- block: "\:rocket\: Release"
- command: "deploy.sh"
```

You can also scope the *block* step to a set of branches. In the following
example, the "Deploy" button and the subsequent `deploy.sh` script will only be
available for builds that run on the `master` branch:

```yml
- command: "test.sh"
- block: "\:rocket\: Release"
  branches: "master"
- command: "deploy.sh"
  branches: "master"
```

Adding the `fields` attribute to a *block* step allows you to add custom fields to the prompt when you click on a *block* step:

```yml
- block:
  name: Release
  prompt: Fill out the details for release
  fields: 
    - text: Release notes
      key: release-notes
      hint: Enter your release notes here \:sparkles\:
    - text: Release name
      key: release-name
      required: false
    - select: Release type
      key: release-type
      default: Major
      options:
        - Major
        - Minor
        - Patch
```

You can test out a live example by adding our sample pipeline with an unblock prompt step to your existing Buildkite organisation: 

<a class="inline-block" href="/new?template=https://github.com/buildkite/unblock-prompt-example" target="__blank"><img src="https://buildkite.com/button.svg" alt="Add Unblock Prompt Example to Buildkite" class="no-decoration" width="160" height="30"></a>

## block attributes

Attributes that are available to describe block steps in your `pipeline.yml`:

<table>
  <tr>
    <th>Attribute</th>
    <th>Example</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>name</td>
    <td>Release \:rocket\:</td>
    <td>The text displayed in the pipeline on this step.</td>
  </tr>
  <tr>
    <td>branches</td>
    <td>master</td>
    <td>
      The names of the branch or branches that will include this block step, separated by spaces.
    </td>
  </tr>
  <tr>
    <td>prompt</td>
    <td>To continue with your deploy, unblock this step by clicking continue</td>
    <td>The heading of the prompt that is opened when you click in a pipeline to unblock a step.</td>
  </tr>
  <tr>
    <td>fields</td>
    <td>text</td>
    <td>The type of field that will be added to the prompt form.<br>Available values: text, select.<br>All form fields are required by default.</td>
  </tr>
</table>


## fields attribute properties

Properties available to describe the `field` attribute inside a block step in your `pipeline.yml`:

<table>
  <tr>
    <th>Attribute</th>
    <th>Example</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>key</td>
    <td>notify-team</td>
    <td>The slug to identify the field for later access via the buildkite-agent meta-data command.</td>
  </tr>
  <tr>
    <td>hint</td>
    <td>Please only select one team to notify</td>
    <td>The text displayed directly under the field label.</td>
  </tr>
  <tr>
    <td>required</td>
    <td>false</td>
    <td>Allows null as a value for this field's key.</td>
  </tr>
  <tr>
    <td>default</td>
    <td>Ops</td>
    <td>The placeholder text displayed in the text box, or the option that is pre-filled in a select field.</td>
  </tr>
  <tr>
    <td>options</td>
    <td>- Support<br>
    - Engineering<br>
    - Ops</td>
    <td>Only applicable to `select` fields, these populate the key/value pairs for radio buttons or a dropdown list.</td>
  </tr>
</table>

