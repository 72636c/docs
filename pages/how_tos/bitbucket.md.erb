# Bitbucket Repo Access

Connecting to Bitbucket's build status API allows repository events to trigger Buildkite builds. Events such as creating or updating a PR triggers the creation of a new build in the associated Buildkite pipeline. After the build completes in Buildkite, the status icon in Bitbucket will update to reflect the outcome. 

There are two parts to connecting Buildkite and Bitbucket, one in each service.  

<%= toc %>

## Connecting Buildkite to Bitbucket

Connecting Bitbucket as an 'app' in Buildkite will allow the Bitbucket webhooks access to your Buildkite account.

* In Buildkite, go to Personal Settings > Connected Apps > Bitbucket and click Connect
<screenshot here>
* You'll now have a new section called `Bitbucket` in your project settings, from which you can manage the status updates
<screenshot here>

## Setting up a Bitbucket webhook

This webhook will be triggered by the repository events that you specify, and will hit your unique Buildkite API endpoint to create a Buildkite build.

1. Visit your Bitbucket repository's Webhooks settings page
1. Click the Add Webhook button and enter the following information:
	* Title: buildkite/ORGNAME/PROJECTNAME
	* URL: your unique buildkite webhook url
	* Status: ‚òëÔ∏è Active
	* SSL/TLS: ‚óΩÔ∏è Skip certificate verification
	* Triggers: `Choose from a full list of triggers`
	<replace these lists with screenshots>
1. From the list of triggers, select the Repository Push event, and the following Pull Request Events:
	* Created
	* Updated
	* Approved
	* Approval Removed
	* Merged
	* Declined 

Click the `save` button, and you're all done! Once you've set up a pipeline with this repository's url, your repository events will trigger builds üéâ
When you set up a new pipeline with a bitbucket url, we'll give you these instructions again, populated with your account details :) 
