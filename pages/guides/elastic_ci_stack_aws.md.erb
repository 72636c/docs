# Elastic CI with AWS

The Buildkite Elastic CI Stack gives you a private, autoscaling Buildkite Agent cluster. Use it to parallelize legacy tests across hundreds of nodes, run tests and deployments for all your Linux-based services and apps, or run AWS ops tasks.

In this guide, we'll show you how to set up your very own autoscaling Buildktie Agent cluster.

<%= toc %>

## Creating an AWS EC2 Key Pair

<%= image "ec2-service.png", size: "#{425/2}x#{258/2}", alt: 'AWS EC2' %>
<%= image "ec2-create-key-pair.png", size: "#{1028/2}x#{416/2}", alt: 'AWS EC2 Create Key Pair' %>

## Create a Buildkite API Access Token

<%= image "agents-tab.png", size: '647x166', alt: 'Buildkite AWS Agents' %>
<%= image "agents-tab-details.png", size: '600x230', alt: 'Buildkite AWS Agents Setup Tokens' %>

## Launching the Stack

<%= image "aws-select-template.png", size: '627x456', alt: 'AWS Select Template Screen' %>
<%= image "aws-parameters.png", size: '561x311', alt: 'AWS Parameters' %>
<%= image "aws-keyname-select.png", size: "#{1056/2}x#{278/2}", alt: 'AWS KeyName Selection' %>
<%= image "aws-create-stack.png", size: "#{1250/2}x#{541/2}", alt: 'AWS KeyName Selection' %>

## Monitoring the Stack

<%= image "cf-wait.gif", alt: "Waiting for the AWS Stack to be created" %>

If you can't see the stack listed, you may need to press the *Refresh* button in the top right hand corner of the screen.

## Running your first build

https://github.com/buildkite/bash-parallel-example

<%= image "github-parallel-example.png", size: "#{1115/2}x#{621/2}", alt: 'AWS Auto Scaling Group Launching' %>
<%= image "buildkite-queue.gif",alt: 'Buildkite Elastic Queue' %>

<%= image "buildkite-new-build.png", size: "#{970/2}x#{871/2}", alt: 'Triggering Buildkite Build' %>
<%= image "asg-launching.png", size: "#{1219/2}x#{686/2}", alt: 'AWS Auto Scaling Group Launching' %>
<%= image "buildkite-connected-agents.png", size: "#{925/2}x#{929/2}", alt: 'Buildkite Connected Agents' %>

<%= image "build.gif", alt: 'Running your first build' %>

## Further documentation

Link to manual

https://github.com/buildkite/elastic-ci-stack-for-aws
